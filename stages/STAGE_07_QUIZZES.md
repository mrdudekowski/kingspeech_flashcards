# Этап 7: Квизы

**Статус:** ⏳ ОЖИДАЕТ  
**Дата начала:** -  
**Дата завершения:** -  

## Цель этапа

Реализовать систему квизов (Multiple Choice и Spelling) с генерацией вопросов и сохранением результатов.

## Чекпойнты

### 1. Quizzes Slice
- [ ] Создан файл `src/features/quizzes/quizzesSlice.ts`
- [ ] Определен initialState с полями: currentQuiz, quizType, answers, results
- [ ] Создан slice с именем 'quizzes'

### 2. Типы для квизов
- [ ] Создан файл `src/features/quizzes/types.ts`
- [ ] Определен интерфейс `QuizzesState`
- [ ] Определен интерфейс `QuizQuestion`
- [ ] Определен интерфейс `QuizAnswer`
- [ ] Используются типы из `shared/types` (QuizType, QuizResult)

### 3. Actions
- [ ] `startQuiz` - начать квиз (тип, модуль, подборка, категория)
- [ ] `submitAnswer` - отправить ответ на вопрос
- [ ] `finishQuiz` - завершить квиз и подсчитать результаты
- [ ] `resetQuiz` - сбросить состояние квиза

### 4. Селекторы
- [ ] `selectCurrentQuiz` - текущий квиз
- [ ] `selectQuizType` - тип квиза
- [ ] `selectCurrentQuestion` - текущий вопрос
- [ ] `selectAnswers` - все ответы
- [ ] `selectQuizResults` - результаты квиза

### 5. Подключение к store
- [ ] Quizzes reducer добавлен в `store.ts`
- [ ] Типы обновлены (RootState включает quizzes)

### 6. QuizMultipleChoice компонент
- [ ] Создан `src/features/quizzes/QuizMultipleChoice.tsx`
- [ ] Отображает вопрос (английское слово/фраза)
- [ ] Отображает 4 варианта ответа (1 правильный, 3 дистрактора)
- [ ] Обрабатывает выбор ответа
- [ ] Показывает визуальную обратную связь (правильно/неправильно)

### 7. Генерация вопросов
- [ ] Создана функция генерации вопросов из словаря
- [ ] Использует слова из `selectCurrentCategoryWords`
- [ ] Генерирует дистракторы из других слов категории
- [ ] Перемешивает варианты ответов

### 8. Генерация дистракторов
- [ ] Дистракторы выбираются из той же категории
- [ ] Дистракторы не повторяются
- [ ] Дистракторы похожи по сложности

### 9. Визуальная обратная связь
- [ ] Правильный ответ выделяется зеленым
- [ ] Неправильный ответ выделяется красным
- [ ] Показывается правильный ответ при ошибке
- [ ] Анимация при выборе ответа

### 10. Подсчет очков
- [ ] Подсчитывается количество правильных ответов
- [ ] Вычисляется процент правильных ответов
- [ ] Сохраняется время прохождения квиза
- [ ] Сохраняются ID слов с ошибками

### 11. QuizSpelling компонент
- [ ] Создан `src/features/quizzes/QuizSpelling.tsx`
- [ ] Отображает перевод/определение
- [ ] Поле ввода для написания слова
- [ ] Обрабатывает ввод пользователя

### 12. Проверка правописания
- [ ] Сравнение введенного слова с правильным ответом
- [ ] Учет регистра (case-insensitive)
- [ ] Обработка опечаток (fuzzy matching, опционально)
- [ ] Показ правильного ответа при ошибке

### 13. Подсказки при ошибках
- [ ] Показывается первая буква слова
- [ ] Показывается количество букв
- [ ] Показывается пример использования (если есть)

### 14. QuizResults компонент
- [ ] Создан `src/features/quizzes/QuizResults.tsx`
- [ ] Отображает процент правильных ответов
- [ ] Отображает список ошибок
- [ ] Показывает рекомендации для изучения
- [ ] Кнопка "Повторить квиз"

### 15. Интеграция с progress
- [ ] При завершении квиза вызывается `saveQuizResult` из progress slice
- [ ] Результаты сохраняются в progress
- [ ] Ошибки обновляют прогресс слов

### 16. Интеграция с vocabulary
- [ ] Квиз использует слова из vocabulary slice
- [ ] Использует `selectCurrentCategoryWords` для получения слов
- [ ] Реагирует на изменение категории

### 17. Тестирование
- [ ] Тест Multiple Choice квиза
- [ ] Тест Spelling квиза
- [ ] Тест генерации вопросов
- [ ] Тест генерации дистракторов
- [ ] Тест подсчета очков
- [ ] Тест сохранения результатов

## Зависимости

- ✅ Этап 6 должен быть завершен (система прогресса работает)

## Результат

Квизы работают, вопросы генерируются корректно, результаты сохраняются в прогресс.

## Примечания

- Используется `QUIZ_TYPES` из constants
- Количество вопросов берется из `APP_CONFIG.QUIZ_QUESTIONS_COUNT`
- Минимальный процент для прохождения из `APP_CONFIG.MIN_CORRECT_ANSWERS`

